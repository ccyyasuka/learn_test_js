<!DOCTYPE html>
<html lang="zh-cmn-Hans">
	<head>
		<meta charset="utf-8" />
		<meta http-equiv="x-ua-compatible" content="IE=edge, chrome=1" />
		<style></style>
	</head>

	<body>
		<script>
			// ******************************************************************************************
			//例题1
			//向后端发送请求计算a+b，但是前端的传参有（1,2)或者(1,2,3,4,5)等类似的,数组长度不定，请采用promise循环调用，
			//每次计算两个值，再将计算结果以及剩下的值传入到后端，直到计算完毕，返回结果，
			// ******************************************************************************************
			// let Add = function (a, b) {
			// 	return new Promise((resolve, reject) => {
			// 		setTimeout(() => {
			// 			resolve(a + b);
			// 		}, 1000);
			// 	});
			// };
			// let backConnect = function (arr) {
			// 	if (arr.length <script 2) return Promise.resolve(arr[0]);
			// 	let cur = Add(arr[0], arr[1]);
			// 	let promise = cur.then(res => {
			// 		return backConnect([res, ...arr.slice(2)]);
			// 	});
			// 	return promise;
			// };
			// let res = backConnect([1, 2, 3, 4, 5]).then(res => {
			// 	console.log(res);
			// });
			// async function backConn(arr) {
			// 	if (arr.length == 1) {
			// 		return arr[0];
			// 	}
			// 	let cur = await Add(arr[0], arr[1]);
			// 	return backConn([cur].concat(arr.slice(2)));
			// }
			// let res = backConn([1, 2, 3, 4, 5]).then(res => {
			// 	console.log(res);
			// });
			// function fn(arr) {
			// 	const result = {};
			// 	arr.forEach(item => {
			// 		result[item.key] = item.value;
			// 	});
			// 	return result;
			// }

			// // 示例数组
			// const arr = [
			// 	{ key: 'key1', value: 'value1' },
			// 	{ key: 'key2', value: 'value2' },
			// ];

			// // 调用函数
			// console.log(fn(arr)); // {key1: "value1", key2: "value2"}

			// ******************************************************************************************
			//例题2
			// 用promise、async、await操作以下输出，使其按序地每隔一秒输出一个值（需保持三个log函数的同步，不能将其改为异步函数）
			// console.log(1)
			// console.log(2)
			// console.log(3)
			// ******************************************************************************************
			function mySleep() {
				return new Promise((resolve, reject) => {
					setTimeout(() => {
						resolve('');
					}, 1000);
					// resolve(''); 千万注意！！ resolve要放在setTimeout里面
				});
			}
			async function printNum() {
				let t1 = await mySleep();
				console.log(1);
				let t2 = await mySleep();
				console.log(2);
				let t3 = await mySleep();
				console.log(3);
			}
			printNum();
		</script>
	</body>
</html>
